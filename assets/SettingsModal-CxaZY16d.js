import{r as h,f as x,j as e}from"./index-D17hGn3D.js";function f({isVisible:i,onClose:t}){var c;const[s,b]=h.useState(null),[r,m]=h.useState("summary");if(h.useEffect(()=>{i&&b(x.getFeedbackSummary())},[i]),!i)return null;const d=a=>{x.downloadFeedbackData(a)},o=a=>{if(a==="data"){const n={consolidated:x.getAllConsolidatedFeedback(),legacy:x.getAllLegacyFeedback()};console.log("📊 Feedback Data:",n)}else{const n=x.getAnalytics();console.log("📈 Feedback Analytics:",n)}alert(`${a==="data"?"Feedback data":"Analytics"} logged to browser console (F12 → Console)`)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"📊 Feedback Data Access"}),e.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-2xl","aria-label":"Close feedback data panel",children:"×"})]})}),e.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"summary",label:"📋 Summary",icon:"📋"},{id:"export",label:"📥 Export",icon:"📥"},{id:"analytics",label:"📈 Analytics",icon:"📈"}].map(a=>e.jsx("button",{onClick:()=>m(a.id),className:`flex-1 px-4 py-3 text-sm font-medium ${r===a.id?"border-b-2 border-blue-500 text-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:a.label},a.id))}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-96",children:[r==="summary"&&s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800",children:"Total Submissions"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.totalSubmissions})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Average Rating"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.averageRating,"/5"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-purple-800",children:"Consolidated Feedback"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:s.consolidatedCount}),e.jsx("p",{className:"text-sm text-purple-600",children:"New system"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-orange-800",children:"Legacy Feedback"}),e.jsx("p",{className:"text-xl font-bold text-orange-600",children:s.legacyCount}),e.jsx("p",{className:"text-sm text-orange-600",children:"Old system"})]})]}),Object.keys(s.milestoneBreakdown).length>0&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Milestone Breakdown"}),e.jsx("div",{className:"space-y-1",children:Object.entries(s.milestoneBreakdown).map(([a,n])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:a}),e.jsx("span",{className:"text-sm font-medium",children:n})]},a))})]}),s.timeRange.first&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Time Range"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"First:"})," ",s.timeRange.first.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Last:"})," ",(c=s.timeRange.last)==null?void 0:c.toLocaleString()]})]})]}),r==="export"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Download Feedback Data"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Export all collected feedback data for analysis or backup"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>d("json"),className:"flex flex-col items-center p-6 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"📄"}),e.jsx("h4",{className:"font-semibold text-blue-800",children:"Download JSON"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Structured data with full details and analytics"})]}),e.jsxs("button",{onClick:()=>d("csv"),className:"flex flex-col items-center p-6 border-2 border-dashed border-green-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[e.jsx("div",{className:"text-3xl mb-2",children:"📊"}),e.jsx("h4",{className:"font-semibold text-green-800",children:"Download CSV"}),e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Spreadsheet format for Excel/Google Sheets"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"View in Browser Console"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>o("data"),className:"px-4 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors",children:"🔍 View Raw Data"}),e.jsx("button",{onClick:()=>o("analytics"),className:"px-4 py-2 bg-purple-100 text-purple-800 rounded hover:bg-purple-200 transition-colors",children:"📈 View Analytics"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Open browser console (F12) to see detailed output"})]})]}),r==="analytics"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Detailed insights into feedback patterns and effectiveness"})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"📈 Available Analytics"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• Submission trends over time"}),e.jsx("li",{children:"• Rating distribution patterns"}),e.jsx("li",{children:"• Milestone effectiveness analysis"}),e.jsx("li",{children:"• Quick response pattern analysis"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>o("analytics"),className:"w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg hover:from-purple-600 hover:to-blue-600 transition-colors",children:"📊 View Full Analytics in Console"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"Analytics data will be logged to browser console for detailed analysis"})})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["💡 ",e.jsx("strong",{children:"Tip:"})," Use browser console commands for more options"]}),e.jsx("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:"qnceFeedbackAccess.help()"})]})})]})})}const N=({isOpen:i,onClose:t,settings:s,onUpdateSettings:b,onRestartStory:r,onChangeStory:m,onShowTutorial:d,onShowAbout:o,onToggleDebug:c,showDebug:a})=>{const[n,u]=h.useState(!1);if(!i)return null;const g=l=>{b({...s,[l]:!s[l]})},p=l=>{b({...s,animationSpeed:l})};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80",children:[e.jsxs("div",{className:"max-w-2xl w-full mx-4 bg-gradient-to-b from-slate-800 to-slate-900 p-6 rounded-lg shadow-2xl border border-indigo-500/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-300 to-purple-300 bg-clip-text text-transparent",children:"Settings"}),e.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-2xl font-bold transition-colors",children:"×"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Display Mode"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-300 font-medium",children:"Developer Mode"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Show technical information and debug features"})]}),e.jsxs("button",{onClick:()=>g("developerMode"),role:"switch","aria-checked":s.developerMode,"aria-label":`Developer Mode ${s.developerMode?"enabled":"disabled"}`,className:`
                    relative inline-flex h-6 w-12 shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                    transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-900
                    ${s.developerMode?"bg-indigo-600":"bg-slate-600"}
                  `,children:[e.jsx("span",{className:"sr-only",children:"Toggle Developer Mode"}),e.jsx("span",{className:`
                      pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                      transition duration-200 ease-in-out
                      ${s.developerMode?"translate-x-6":"translate-x-0"}
                    `})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-300 font-medium",children:"Variable Dashboard"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Display real-time narrative variables"})]}),e.jsxs("button",{onClick:()=>g("showVariableDashboard"),role:"switch","aria-checked":s.showVariableDashboard,"aria-label":`Variable Dashboard ${s.showVariableDashboard?"enabled":"disabled"}`,className:`
                    relative inline-flex h-6 w-12 shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                    transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-900
                    ${s.showVariableDashboard?"bg-indigo-600":"bg-slate-600"}
                  `,children:[e.jsx("span",{className:"sr-only",children:"Toggle Variable Dashboard"}),e.jsx("span",{className:`
                      pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                      transition duration-200 ease-in-out
                      ${s.showVariableDashboard?"translate-x-6":"translate-x-0"}
                    `})]})]}),s.developerMode&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-300 font-medium",children:"Debug Information"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Show internal state and flags (Dev Mode only)"})]}),e.jsxs("button",{onClick:()=>g("showDebugInfo"),role:"switch","aria-checked":s.showDebugInfo,"aria-label":`Debug Information ${s.showDebugInfo?"enabled":"disabled"}`,className:`
                      relative inline-flex h-6 w-12 shrink-0 cursor-pointer rounded-full border-2 border-transparent 
                      transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-900
                      ${s.showDebugInfo?"bg-indigo-600":"bg-slate-600"}
                    `,children:[e.jsx("span",{className:"sr-only",children:"Toggle Debug Information"}),e.jsx("span",{className:`
                        pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 
                        transition duration-200 ease-in-out
                        ${s.showDebugInfo?"translate-x-6":"translate-x-0"}
                      `})]})]})]})]}),e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Animation Speed"}),e.jsx("div",{className:"flex gap-3",children:["slow","normal","fast"].map(l=>e.jsx("button",{onClick:()=>p(l),className:`px-4 py-2 rounded-lg transition-colors capitalize ${s.animationSpeed===l?"bg-indigo-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:l},l))})]}),e.jsxs("div",{className:"text-sm text-slate-400",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{className:"text-slate-300",children:"Casual Mode:"})," Clean, immersive narrative experience"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-slate-300",children:"Developer Mode:"})," Exposes technical details and quantum mechanics"]})]}),e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r&&e.jsxs("button",{onClick:()=>{r(),t()},className:"flex items-center gap-2 px-4 py-3 bg-blue-600/20 border border-blue-500/30 text-blue-300 rounded-lg hover:bg-blue-600/30 transition-colors",children:[e.jsx("span",{children:"🔄"}),"Restart Story"]}),m&&e.jsxs("button",{onClick:()=>{m(),t()},className:"flex items-center gap-2 px-4 py-3 bg-cyan-600/20 border border-cyan-500/30 text-cyan-300 rounded-lg hover:bg-cyan-600/30 transition-colors",children:[e.jsx("span",{children:"📚"}),"Change Story"]}),d&&e.jsxs("button",{onClick:()=>{d(),t()},className:"flex items-center gap-2 px-4 py-3 bg-yellow-600/20 border border-yellow-500/30 text-yellow-300 rounded-lg hover:bg-yellow-600/30 transition-colors",children:[e.jsx("span",{children:"📖"}),"Tutorial"]}),o&&e.jsxs("button",{onClick:()=>{o(),t()},className:"flex items-center gap-2 px-4 py-3 bg-purple-600/20 border border-purple-500/30 text-purple-300 rounded-lg hover:bg-purple-600/30 transition-colors",children:[e.jsx("span",{children:"ℹ️"}),"About"]})]})]}),s.developerMode&&e.jsxs("div",{className:"border-b border-slate-700 pb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Developer Tools"}),e.jsx("div",{className:"flex gap-3",children:c&&e.jsxs("button",{onClick:()=>{c()},className:`flex items-center gap-2 px-4 py-3 border rounded-lg transition-colors ${a?"bg-gray-600/30 border-gray-500/50 text-gray-300":"bg-gray-600/20 border-gray-500/30 text-gray-400 hover:bg-gray-600/30"}`,children:[e.jsx("span",{children:a?"👁️":"🔍"}),a?"Hide Debug":"Show Debug"]})})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-8",children:e.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-lg font-semibold transition-all duration-300 shadow-lg",children:"Apply Settings"})})]}),e.jsx(f,{isVisible:n,onClose:()=>u(!1)})]})};export{N as default};
