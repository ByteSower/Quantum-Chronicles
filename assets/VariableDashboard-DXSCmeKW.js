import{r as m,j as e}from"./index-D17hGn3D.js";const y=({text:n,children:l})=>{const[i,r]=m.useState(!1);return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!i),className:"cursor-help",children:l}),i&&e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 border border-indigo-500 rounded-lg text-xs text-white w-48 z-50 shadow-lg",children:[e.jsx("div",{className:"text-center leading-relaxed",children:n}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})},M=({curiosity:n,coherence:l,disruption:i,synchrony:r,onInteraction:c})=>{const[o,b]=m.useState({curiosity:{previousValue:n,currentValue:n,isAnimating:!1},coherence:{previousValue:l,currentValue:l,isAnimating:!1},disruption:{previousValue:i,currentValue:i,isAnimating:!1},synchrony:{previousValue:r,currentValue:r,isAnimating:!1}}),[h,v]=m.useState(!1),[x,j]=m.useState(!1);m.useEffect(()=>{const s={...o};let a=!1;n!==o.curiosity.currentValue&&(s.curiosity={previousValue:o.curiosity.currentValue,currentValue:n,isAnimating:!0},a=!0),l!==o.coherence.currentValue&&(s.coherence={previousValue:o.coherence.currentValue,currentValue:l,isAnimating:!0},a=!0),i!==o.disruption.currentValue&&(s.disruption={previousValue:o.disruption.currentValue,currentValue:i,isAnimating:!0},a=!0),r!==o.synchrony.currentValue&&(s.synchrony={previousValue:o.synchrony.currentValue,currentValue:r,isAnimating:!0},a=!0),a&&(b(s),setTimeout(()=>{b(d=>{const t={...d};return Object.keys(t).forEach(u=>{t[u].isAnimating=!1}),t})},1500))},[n,l,i,r]);const N=(s,a)=>a?"text-yellow-300":s>=8?"text-green-300":s>=5?"text-blue-300":s>=2?"text-purple-300":s<=-2?"text-red-300":"text-gray-300",V=(s,a,d)=>{const t={curiosity:"👁️",coherence:"🧭",disruption:"⚡️",synchrony:"🔗"};return d?"✨":t[s]},w=s=>({curiosity:"Curiosity drives exploration and discovery. Higher values unlock new paths and reveal hidden information, while lower values limit your narrative options.",coherence:"Coherence represents how well your understanding fits together. Higher coherence provides clarity and stability in your story progression.",disruption:"Disruption measures how much you're challenging the established order. Higher values open radical possibilities but may create instability.",synchrony:"Synchrony reflects how aligned you are with the narrative flow. Higher synchrony creates powerful story convergences and meaningful connections."})[s],p=(s,a,d)=>{const t=o[s],u=t.currentValue>t.previousValue,g=t.currentValue-t.previousValue;return e.jsxs("div",{className:`variable flex items-center my-1.5 transition-all duration-500 ${t.isAnimating?"scale-105 bg-gray-800 bg-opacity-50 rounded px-2 py-1":""}`,children:[e.jsx("span",{className:`variable-icon mr-1.5 transition-all duration-300 ${t.isAnimating?"animate-pulse scale-125":""}`,children:V(s,a,t.isAnimating)}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"variable-label font-bold mr-1.5 text-gray-200",children:[d,":"]}),e.jsx(y,{text:w(s),children:e.jsx("span",{className:"text-xs text-gray-400 hover:text-indigo-300 mr-1.5 cursor-help",children:"ℹ️"})})]}),e.jsx("span",{className:`variable-value transition-all duration-500 font-semibold ${N(a,t.isAnimating)} ${t.isAnimating?"drop-shadow-lg":""}`,style:{filter:t.isAnimating?"drop-shadow(0 0 8px currentColor)":"none"},children:a}),t.isAnimating&&g!==0&&e.jsxs("span",{className:`ml-2 text-xs font-bold transition-all duration-500 ${u?"text-green-400":"text-red-400"}`,style:{animation:"fadeInOut 1.5s ease-in-out"},children:[u?"+":"",g]}),t.isAnimating&&Math.abs(g)>=3&&e.jsx("div",{className:"ml-2 w-3 h-3 rounded-full border-2 opacity-70",style:{borderColor:u?"#10b981":"#ef4444",animation:"ripple 1.5s ease-out"}})]},s)},f=()=>e.jsxs(e.Fragment,{children:[p("curiosity",n,"Curiosity"),p("coherence",l,"Coherence"),p("disruption",i,"Disruption"),p("synchrony",r,"Synchrony"),e.jsxs("div",{className:"mt-3 pt-2 border-t border-indigo-500 border-opacity-30",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:"Field Strength:"}),e.jsx(y,{text:"Field Strength represents the convergence of narrative energy from your choices. Higher values indicate that story themes are pulling together strongly, creating focused narrative paths and powerful story moments.",children:e.jsx("span",{className:"text-xs text-gray-400 hover:text-indigo-300 ml-1 cursor-help",children:"ℹ️"})})]}),e.jsx("span",{className:"font-semibold",children:Math.abs(n)+Math.abs(l)+Math.abs(i)+Math.abs(r)})]}),e.jsx("div",{className:"mt-1 h-1 bg-gray-800 rounded overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 via-blue-500 to-cyan-500 transition-all duration-1000",style:{width:`${Math.min(100,(Math.abs(n)+Math.abs(l)+Math.abs(i)+Math.abs(r))*2)}%`,filter:"drop-shadow(0 0 4px currentColor)"}})})]})]});return e.jsxs("div",{className:`variable-dashboard ${x?"open":"collapsed"}`,children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"sheet-header",onClick:()=>{j(s=>!s),c==null||c()},children:e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm",children:"⚛️ Quantum State"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Tap to ",x?"collapse":"expand"]}),e.jsx("span",{className:"text-lg",children:x?"▼":"▲"})]})]})}),e.jsx("div",{className:`dashboard-content sheet-content ${x?"block":"hidden"}`,children:e.jsx(f,{})})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:"⚛️"}),e.jsx("h3",{className:"text-sm font-bold text-gray-200",children:"Quantum State"})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("button",{onClick:()=>{v(!h),c==null||c()},className:"text-xs text-gray-400 hover:text-white transition-colors duration-200 px-1",title:h?"Expand Dashboard":"Minimize Dashboard",children:h?"📋":"➖"})})]}),e.jsx("div",{className:`dashboard-content ${h?"hidden":"block"}`,children:e.jsx(f,{})})]}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes fadeInOut {
            0% { opacity: 0; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1.1); }
            100% { opacity: 0; transform: scale(0.9); }
          }
          
          @keyframes ripple {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(4); opacity: 0; }
          }
          
          @keyframes quantumGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(168, 85, 247, 0.3); }
            50% { box-shadow: 0 0 20px rgba(168, 85, 247, 0.8); }
          }
        `}})]})};export{M as default};
